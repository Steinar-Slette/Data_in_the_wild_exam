df_articles = pd.read_csv('../data/annotation/_final/2022_January_all_articles_annotated.csv', sep=';')
df_articles['Tags'] = df_articles['Tags'].str.lower()
#When csv is loaded, the Tags array is recognized as a string, this casts it to an array
df_articles['Tags'] = df_articles['Tags'].apply(ast.literal_eval)
from collections import Counter
# Flatten the list of tags from all rows
all_tags = [tag for tags in df_articles['Tags'] for tag in tags]
# Count the occurrences of each tag
tag_counts = Counter(all_tags)
# Convert the tag counts to a DataFrame
df_tag_counts = pd.DataFrame.from_dict(tag_counts, orient='index', columns=['Count']).reset_index()
df_tag_counts = df_tag_counts.rename(columns={'index': 'Tag'})
# Sort the DataFrame by tag counts
df_tag_counts = df_tag_counts.sort_values(by='Count', ascending=False)

#Plot the 10 most common tags. 
top_tags = tag_counts.most_common(10)

# Extract tag names and counts for plotting
tag_names = [tag[0] for tag in top_tags]
tag_values = [tag[1] for tag in top_tags]

# Plotting
plt.figure(figsize=(10, 6))
plt.bar(tag_names, tag_values)
plt.title('Top 10 Most Popular Tags 2022')
plt.xlabel('Tags')
plt.ylabel('Count')
plt.xticks(rotation=45)
plt.tight_layout()

# Show plot
plt.show()